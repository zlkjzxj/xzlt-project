<!DOCTYPE html>
<html xmlns:shiro="http://www.pollix.at/thymeleaf/shiro" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8">
    <title>项目列表--layui后台管理模板 2.0</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <link rel="stylesheet" href="/static/layui/css/layui.css" media="all"/>
    <link rel="stylesheet" href="/static/css/public.css" media="all"/>
    <style>
        .layui-table-cell {
            height: 102px;
            line-height: 102px;
        }
    </style>

</head>
<body class="childrenBody">
<form class="layui-form">
    <input type="hidden" id="userId" th:value="${session.loginUserId}"/>
    <input type="hidden" id="projectId"/>
    <input id="departVal" type="hidden">
    <blockquote class="layui-elem-quote quoteBox">
        <form class="layui-form">
            <div class="layui-input-inline">
                <input type="text" class="layui-input searchVal" style="width: 300px;"
                       placeholder="搜索条件：项目名称|编号|部门|项目经理"/>
            </div>
            <div class="layui-input-inline">
                <select class="state" id="xmjxSelect">
                    <option value="">是否结项</option>
                    <option value="1">是</option>
                    <option value="0">否</option>
                </select>
            </div>
            <div class="layui-inline">
                <a class="layui-btn search_btn" data-type="reload">搜索</a>
            </div>
            <shiro:hasPermission name="project:add">
                <div class="layui-inline">
                    <a class="layui-btn layui-btn-normal add_btn">添加</a>
                </div>
            </shiro:hasPermission>
            <shiro:hasPermission name="project:edit">
                <div class="layui-inline">
                    <a class="layui-btn layui-btn-normal edit_btn">编辑</a>
                </div>
            </shiro:hasPermission>
            <shiro:hasPermission name="project:del">
                <div class="layui-inline">
                    <a class="layui-btn layui-btn-danger delAll_btn">删除</a>
                </div>
            </shiro:hasPermission>
            <shiro:hasPermission name="project:export">
                <div class="layui-inline">
                    <a class="layui-btn layui-btn-danger export_btn">导出当前页</a>
                </div>
            </shiro:hasPermission>
            <shiro:hasPermission name="project:exportall">
                <div class="layui-inline">
                    <a class="layui-btn layui-btn-danger exportall_btn">导出全部</a>
                </div>
            </shiro:hasPermission>
        </form>
    </blockquote>
    <table id="projectList" lay-filter="projectList" lay-size="lg"></table>
    <!--审核状态-->
    <script type="text/html" id="newsStatus">
        {{#  if(d.newsStatus == "1"){ }}
        <span class="layui-red">等待审核</span>
        {{#  } else if(d.newsStatus == "0"){ }}
        <span class="layui-blue">已存草稿</span>
        {{#  } else { }}
        审核通过
        {{#  }}}
    </script>

    <!--操作-->
    <script type="text/html" id="newsListBar">
        <a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
        <a class="layui-btn layui-btn-xs layui-btn-danger" lay-event="del">删除</a>
        <a class="layui-btn layui-btn-xs layui-btn-primary" lay-event="look">预览</a>
    </script>
</form>
<script type="text/javascript" src="/static/layui/layui.js"></script>
<script type="text/javascript" src="/static/js/project/list.js"></script>
<script type="text/javascript" src="/static/jointjs/jquery-3.3.1.js"></script>
<script type="text/javascript" src="/static/md5/md5.js"></script>
<script>
    //下面三个参数是 appID ,app密码和token
    var APPID = "xz05cd18000b01e645",
        APPSECRET = "79a81f438a4ab8fabca67360867daa1a",
        APP_TOKEN = "xzlt",
        date = new Date();
    //时间戳
    var timestamp = date.getTime();
    console.log(timestamp);
    //通过MD5加密，防止接口被恶意调用
    var md5Str = hex_md5(APPID + APPSECRET + APP_TOKEN + timestamp);
    var signature = md5Str.toLocaleUpperCase();
    console.log(signature);
    var projectId = "二维码传过来的值";
    var url = "http://localhost:8888/app/getProjectInfo?signature=" + signature
        + "&timestamp=" + timestamp + "&projectID=" + projectId;
</script>
</body>
</html>